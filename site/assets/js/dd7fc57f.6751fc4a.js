"use strict";(self.webpackChunkhomepage=self.webpackChunkhomepage||[]).push([[247],{1160:function(e,t,n){n.d(t,{Z:function(){return i}});var a=n(7294),s=n(7333),r=n(2669),o=n(7954),l=n(474);function i(e){var t=(0,a.useState)(e.value||"14241387"),n=t[0],i=t[1];return a.createElement(a.Fragment,null,a.createElement(r.Z,{className:"align-items-center"},a.createElement(o.Z,{className:"tx-label"},"App Index"),a.createElement(s.Z,{value:n,onValueChange:function(t){t.value&&(i(t.value),e.onChangeAppIndex(t.value))},className:"form-control tx-input",placeholder:"0",allowNegative:!1,isNumericString:!0,disabled:e.disabled}),a.createElement(l.Z,null,"Invalid number")))}},7720:function(e,t,n){n.d(t,{Z:function(){return u}});var a=n(7294),s=n(2669),r=n(7954),o=n(6704),l=n(2842),i=n(2866),c=n(8227);function u(e){var t=e.accounts&&e.accounts.length>0?e.accounts[0]:{name:"No wallet loaded"},n=(0,a.useState)(t),u=n[0],m=n[1],p=(0,a.useState)(!1),d=p[0],f=p[1];(0,a.useEffect)((function(){e.accounts.length>0&&e.onSelectSender(e.accounts[0].address)}),[]);return a.createElement(a.Fragment,null,a.createElement(s.Z,{className:"align-items-center"},a.createElement(r.Z,{className:"tx-label"},"From"),a.createElement(o.Z,{disabled:e.disabled||!e.accounts||0===e.accounts.length,className:"from-dropdown",isOpen:d,toggle:function(e){e.preventDefault(),f(!d)}},a.createElement(l.Z,{caret:!0,disabled:e.disabled},a.createElement("span",{className:"text-ellipsis"},u?u.name:"No account loaded")),a.createElement(i.Z,null,e.accounts&&e.accounts.map((function(t){return a.createElement(c.Z,{onClick:function(){return function(t){m(t),e.onSelectSender(t.address)}(t)},key:"account-"+t.address},a.createElement("span",{className:"text-ellipsis"},t.name))}))))))}},5456:function(e,t,n){n.d(t,{Z:function(){return x}});var a=n(7294),s=n(7462),r=n(3366),o=n(7326),l=n(2856),i=n(5697),c=n.n(i),u=n(4184),m=n.n(u),p=n(3663),d={children:c().node,type:c().string,size:c().oneOfType([c().number,c().string]),bsSize:c().string,valid:c().bool,invalid:c().bool,tag:p.iC,innerRef:c().oneOfType([c().object,c().func,c().string]),plaintext:c().bool,addon:c().bool,className:c().string,cssModule:c().object},f=function(e){function t(t){var n;return(n=e.call(this,t)||this).getRef=n.getRef.bind((0,o.Z)(n)),n.focus=n.focus.bind((0,o.Z)(n)),n}(0,l.Z)(t,e);var n=t.prototype;return n.getRef=function(e){this.props.innerRef&&this.props.innerRef(e),this.ref=e},n.focus=function(){this.ref&&this.ref.focus()},n.render=function(){var e=this.props,t=e.className,n=e.cssModule,o=e.type,l=e.bsSize,i=e.valid,c=e.invalid,u=e.tag,d=e.addon,f=e.plaintext,g=e.innerRef,h=(0,r.Z)(e,["className","cssModule","type","bsSize","valid","invalid","tag","addon","plaintext","innerRef"]),v=["radio","checkbox"].indexOf(o)>-1,b=new RegExp("\\D","g"),x=u||("select"===o||"textarea"===o?o:"input"),y="form-control";f?(y+="-plaintext",x=u||"input"):"file"===o?y+="-file":"range"===o?y+="-range":v&&(y=d?null:"form-check-input"),h.size&&b.test(h.size)&&((0,p.O4)('Please use the prop "bsSize" instead of the "size" to bootstrap\'s input sizing.'),l=h.size,delete h.size);var E=(0,p.mx)(m()(t,c&&"is-invalid",i&&"is-valid",!!l&&"form-control-"+l,y),n);return("input"===x||u&&"function"==typeof u)&&(h.type=o),h.children&&!f&&"select"!==o&&"string"==typeof x&&"select"!==x&&((0,p.O4)('Input with a type of "'+o+'" cannot have children. Please use "value"/"defaultValue" instead.'),delete h.children),a.createElement(x,(0,s.Z)({},h,{ref:g,className:E,"aria-invalid":c}))},t}(a.Component);f.propTypes=d,f.defaultProps={type:"text"};var g=f,h=n(2669),v=n(7954),b=n(8764).Buffer;function x(e){var t=(0,a.useState)(""),n=t[0],s=t[1];return a.createElement(a.Fragment,null,a.createElement(h.Z,null,a.createElement(v.Z,{className:"tx-label"},"Note"),a.createElement(g,{className:"tx-input note",type:"textarea",placeholder:"Note",value:n,onChange:function(t){s(t.target.value),e.onChangeNote(new Uint8Array(b.from(t.target.value,"utf8")))},disabled:e.disabled})))}},8580:function(e,t,n){n.r(t),n.d(t,{contentTitle:function(){return S},default:function(){return P},frontMatter:function(){return T},metadata:function(){return I},toc:function(){return R}});var a=n(7462),s=n(3366),r=n(7294),o=n(3905),l=n(5861),i=n(7757),c=n.n(i),u=n(7243),m=n(3999),p=n(8008),d=n(9393),f=n(8829),g=n(267),h=n(1252),v=n(5538),b=n(7975),x=n(7954),y=n(1160),E=n(1152),Z=n(7720),C=n(5456),N=n(412),k=n(3130);function A(){var e=(0,r.useContext)(k.E),t=N.Z.canUseDOM&&window.sharedAccounts&&Array.isArray(window.sharedAccounts)?window.sharedAccounts:[],n=(0,r.useState)(""),a=n[0],s=n[1],o=(0,r.useState)("14241387"),i=o[0],A=o[1],O=(0,r.useState)(),w=O[0],T=O[1],S=(0,r.useState)(),I=S[0],R=S[1],M=(0,r.useState)("1"),P=M[0],z=M[1],j=function(e){P!==e&&z(e)},D=function(){var n=(0,l.Z)(c().mark((function n(s){var r,o,l;return c().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(s.preventDefault(),n.prev=1,0!==t.length){n.next=4;break}return n.abrupt("return");case 4:return r={fee:1e3,firstRound:15249878,flatFee:!1,genesisHash:"SGO1GKSzyE7IEPItTxCByw9x8FmnrCDexi9/cOUJOiI=",genesisID:"testnet-v1.0",lastRound:15250878},o=e.algosdk.makeApplicationCloseOutTxnFromObject({suggestedParams:Object.assign({},r,{fee:1e3,flatFee:!0}),from:a,appIndex:parseInt(i),note:w}),n.next=8,e.myAlgoWallet.signTransaction(o.toByte());case 8:l=n.sent,R(l),n.next=16;break;case 12:n.prev=12,n.t0=n.catch(1),console.error(n.t0),R(n.t0.message);case 16:case"end":return n.stop()}}),n,null,[[1,12]])})));return function(e){return n.apply(this,arguments)}}();return r.createElement("div",{className:"interactive-example"},r.createElement(u.Z,{tabs:!0},r.createElement(m.Z,null,r.createElement(p.Z,{className:"1"===P?"active active-tab":"",onClick:function(){j("1")}},"Form")),r.createElement(m.Z,null,r.createElement(p.Z,{className:"2"===P?"active active-tab":"",onClick:function(){j("2")}},"Code"))),r.createElement(d.Z,{activeTab:P},r.createElement(f.Z,{tabId:"1"},r.createElement(g.Z,{className:"mt-3"},r.createElement(h.Z,{xs:"12",lg:"6",className:"mt-2"},r.createElement(v.Z,{id:"payment-tx",onSubmit:D},r.createElement(Z.Z,{onSelectSender:s,accounts:t}),r.createElement(y.Z,{onChangeAppIndex:A}),r.createElement(C.Z,{onChangeNote:T}),r.createElement(b.Z,{color:"primary",block:!0,type:"submit",className:"mt-2",disabled:0===t.length},"Submit"))),r.createElement(h.Z,{xs:"12",lg:"6",className:"mt-2 mt-xs-2"},r.createElement(x.Z,{className:"tx-label"},"signTransaction() Response"),r.createElement("div",{className:"response-base txn-optin-response"},r.createElement(E.Z,{code:I?JSON.stringify(I,null,1):"",language:"js",plugins:["response"]})),r.createElement(b.Z,{className:"button-margin",color:"primary",block:!0,disabled:!I,onClick:function(){return R("")}},"Clear Method Response"))),0===t.length&&r.createElement("div",{className:"error-connect mt-3"}," In order to run this example, you need to execute connect() method. ")),r.createElement(f.Z,{tabId:"2"},r.createElement("div",{className:"mt-4"}," The following codes allow you to create and sent to MyAlgo Connect an closeOut transaction to be sign by the user. There are two alternatives to create it. Pick the one you prefere."),r.createElement(g.Z,{className:"mt-3"},r.createElement(h.Z,null,r.createElement(x.Z,{className:"tx-label"},"Using Algosdk (Recommended)"),r.createElement(E.Z,{code:"\nimport algosdk from \"algosdk\";\nimport MyAlgoConnect from '@randlabs/myalgo-connect';\n \nconst algodClient = new algosdk.Algodv2(\"\",'https://api.testnet.algoexplorer.io', '');\nconst params = await algodClient.getTransactionParams().do();\n\nconst txn = algosdk.makeApplicationCloseOutTxnFromObject({\n    suggestedParams: {\n        ...params,\n    },\n    from: sender,\n    appIndex: appIndex,\n    note: note\n});\n\nconst myAlgoConnect = new MyAlgoConnect();\nconst signedTxn = await myAlgoConnect.signTransaction(txn.toByte());\n",language:"js"})),r.createElement(h.Z,{className:"mt-4"},r.createElement(x.Z,{className:"tx-label"},"Another alternative"),r.createElement(E.Z,{code:"\nimport algosdk from \"algosdk\";\nimport MyAlgoConnect from '@randlabs/myalgo-connect';\n \nconst algodClient = new algosdk.Algodv2(\"\",'https://api.testnet.algoexplorer.io', '');\nconst params = await algodClient.getTransactionParams().do();\n\nconst txn : any = {\n    ...params,\n    type: \"appl\",\n    appOnComplete: 2, // OnApplicationComplete.CloseOutOC\n    from: sender,\n    appIndex: appIndex,\n    note: note,\n};\n\nconst myAlgoConnect = new MyAlgoConnect();\nconst signedTxn = await myAlgoConnect.signTransaction(txn);\n",language:"js"}))))))}var O=function(){return r.createElement(k.Z,null,r.createElement(A,null))},w=["components"],T={sidebar_position:5},S="Appl CloseOut Transaction",I={unversionedId:"interactive-examples/ApplCloseOut",id:"interactive-examples/ApplCloseOut",isDocsHomePage:!1,title:"Appl CloseOut Transaction",description:"Create and send a closeOut transaction to be signed by the user already engaged.",source:"@site/docs/interactive-examples/ApplCloseOut.mdx",sourceDirName:"interactive-examples",slug:"/interactive-examples/ApplCloseOut",permalink:"/docs/interactive-examples/ApplCloseOut",editUrl:"https://github.com/randlabs/myalgo-connect-homepage/edit/master/docs/interactive-examples/ApplCloseOut.mdx",version:"current",sidebarPosition:5,frontMatter:{sidebar_position:5},sidebar:"sidebar",previous:{title:"Appl Opt-In Transaction",permalink:"/docs/interactive-examples/ApplOptIn"},next:{title:"Payment with Teal Transaction",permalink:"/docs/interactive-examples/PaymentWithTeal"}},R=[{value:"Preconditions",id:"preconditions",children:[]},{value:"Interactive Example",id:"interactive-example",children:[]}],M={toc:R};function P(e){var t=e.components,n=(0,s.Z)(e,w);return(0,o.kt)("wrapper",(0,a.Z)({},M,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"appl-closeout-transaction"},"Appl CloseOut Transaction"),(0,o.kt)("p",null,"Create and send a closeOut transaction to be signed by the user already engaged."),(0,o.kt)("h3",{id:"preconditions"},"Preconditions"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},"User is already engaged and shared some account.")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},"Transaction sender should match with one of address shared by the user, otherwise user will be alert."))),(0,o.kt)("h3",{id:"interactive-example"},"Interactive Example"),(0,o.kt)(O,{mdxType:"ApplCloseOut"}))}P.isMDXComponent=!0},5538:function(e,t,n){var a=n(7462),s=n(3366),r=n(7326),o=n(2856),l=n(7294),i=n(5697),c=n.n(i),u=n(4184),m=n.n(u),p=n(3663),d={children:c().node,inline:c().bool,tag:p.iC,innerRef:c().oneOfType([c().object,c().func,c().string]),className:c().string,cssModule:c().object},f=function(e){function t(t){var n;return(n=e.call(this,t)||this).getRef=n.getRef.bind((0,r.Z)(n)),n.submit=n.submit.bind((0,r.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.getRef=function(e){this.props.innerRef&&this.props.innerRef(e),this.ref=e},n.submit=function(){this.ref&&this.ref.submit()},n.render=function(){var e=this.props,t=e.className,n=e.cssModule,r=e.inline,o=e.tag,i=e.innerRef,c=(0,s.Z)(e,["className","cssModule","inline","tag","innerRef"]),u=(0,p.mx)(m()(t,!!r&&"form-inline"),n);return l.createElement(o,(0,a.Z)({},c,{ref:i,className:u}))},t}(l.Component);f.propTypes=d,f.defaultProps={tag:"form"},t.Z=f}}]);